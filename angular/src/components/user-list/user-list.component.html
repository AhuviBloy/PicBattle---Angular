<!-- <h1>רשימת משתמשים</h1>

@if(users.length === 0) {
  <h2>אין משתמשים במערכת</h2>
} @else {
  <div class="users-grid">
    @for(user of users; track user.id) {
      <mat-card class="user-card">
        <mat-card-header>
          <mat-card-title>{{ user.name || user.username }}</mat-card-title>
          <mat-card-subtitle>{{ user.email }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p><strong>מזהה:</strong> {{ user.id }}</p>
          @if(user.role) {
            <p><strong>תפקיד:</strong> {{ user.role }}</p>
          }
        </mat-card-content>
      </mat-card>
    }
  </div>
} -->



<div class="user-list-container">
  <div class="header-section">
    <div class="header-content">
      <mat-icon class="header-icon">people</mat-icon>
      <div class="header-text">
        <h1 class="page-title">רשימת משתמשים</h1>
        <p class="subtitle">ניהול משתמשי המערכת</p>
      </div>
    </div>
    
    <div class="stats-section">
      <div class="stat-card">
        <mat-icon>groups</mat-icon>
        <div class="stat-info">
          <span class="stat-number">{{ users.length }}</span>
          <span class="stat-label">משתמשים</span>
        </div>
      </div>
    </div>
  </div>

  @if(loading) {
    <div class="loading-container">
      <mat-spinner color="primary"></mat-spinner>
      <p>טוען רשימת משתמשים...</p>
    </div>
  } @else if(users.length === 0) {
    <div class="no-users">
      <mat-icon class="no-users-icon">person_off</mat-icon>
      <h2>אין משתמשים במערכת</h2>
      <p>לא נמצאו משתמשים רשומים במערכת</p>
    </div>
  } @else {
    <div class="users-grid">
      @for(user of users; track user.id) {
        @if(user.role != 0){
        <mat-card class="user-card">
          <div class="card-header">
            <!-- <div class="user-avatar">
              <mat-icon [class.admin-avatar]="user.role === 0"
                       [class.moderator-avatar]="user.role === 1">
                {{ getRoleIcon(user.role) }}
              </mat-icon>
            </div> -->
            
            <!-- @if(isAdmin && user.id !== currentUserId) {
              <button mat-icon-button 
                     class="delete-btn" 
                     (click)="deleteUser(user.id, user.name || user.username)"
                     matTooltip="מחק משתמש">
                <mat-icon>delete</mat-icon>
              </button>
            } -->
          </div>

          <mat-card-header>
            <mat-card-title class="user-name">
              {{ user.name || user.username }}
            </mat-card-title>
            <mat-card-subtitle class="user-email">
              {{ user.email }}
            </mat-card-subtitle>
          </mat-card-header>
          
          <mat-card-content>
            <div class="user-details">
              <div class="detail-item">
                <mat-icon>tag</mat-icon>
                <span class="detail-label">מזהה:</span>
                <span class="detail-value">{{ user.id }}</span>
              </div>
              
              <!-- @if(user.role) {
                <div class="detail-item">
                  <mat-icon>{{ getRoleIcon(user.role) }}</mat-icon>
                  <span class="detail-label">תפקיד:</span>
                  <mat-chip [color]="getRoleColor(user.role)" selected>
                    {{ user.role }}
                  </mat-chip>
                </div>
              } -->

              <!-- @if(user.createdDate) {
                <div class="detail-item">
                  <mat-icon>calendar_today</mat-icon>
                  <span class="detail-label">הצטרף:</span>
                  <span class="detail-value">{{ user.createdDate | date:'short' }}</span>
                </div>
              }

              @if(user.lastLogin) {
                <div class="detail-item">
                  <mat-icon>login</mat-icon>
                  <span class="detail-label">כניסה אחרונה:</span>
                  <span class="detail-value">{{ user.lastLogin | date:'short' }}</span>
                </div>
              } -->
            </div>
          </mat-card-content>

          <!-- @if(isAdmin) { -->
            <mat-card-actions class="card-actions">
              <!-- <button mat-button color="primary">
                <mat-icon>edit</mat-icon>
                ערוך
              </button>
              <button mat-button>
                <mat-icon>visibility</mat-icon>
                פרטים
              </button> -->
              @if(user.role !== 0) {
              
                <button mat-button 
                       color="warn" 
                       (click)="deleteUser(user.id, user.name || user.username)">
                  <mat-icon>delete</mat-icon>
                  מחק
                </button>
              }
            </mat-card-actions>
          <!-- } -->
        </mat-card>
      }
    }
    </div>
  }
</div>